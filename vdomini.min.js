var e=Symbol(),t=(e,t,...r)=>({type:e,props:t,children:r});function r(e){let t="";for(let r=0,n="";r<e.length;r++)n=e.charAt(r),t+=n>="A"&&n<="Z"?"-"+n.toLowerCase():n;return t}var n={createElement:document.createElement},o={createElement:document.createElementNS.bind(document,"http://www.w3.org/2000/svg")},s=new WeakMap,c=new WeakMap,i=new WeakMap,l=(e,t,r,n,o)=>{switch(r){case"key":return;case"ref":return void(n&&(n.current=e));case"value":case"checked":return void(e[r]=n);case"style":return e.setAttribute("style",n),void(o.style=e.getAttributeNode("style"))}const s=r;switch(typeof n){case"string":case"number":return e.setAttribute(s,n),void(o[s]=e.getAttributeNode(s));case"function":return e.setAttribute(s,""),o[s]=e.getAttributeNode(s),void(e[r]=n);case"boolean":return void(n&&(e.setAttribute(s,""),o[s]=e.getAttributeNode(s)));default:null!=n&&(e[r]=n)}},p=(e,t,r,n={})=>{for(const t in r)l(e,0,t,r[t],n);s.set(e,{props:r,attrs:n})},a=(e,t,r)=>{if(!s.has(e))return r&&p(e,0,r);const n=s.get(e),{attrs:o,props:c}=n;if(!r){for(const t in o)e.removeAttributeNode(o[t]);for(const t in c)delete e[t];return void s.delete(e)}let i;e:for(const t in c)if(t in r){switch(i=r[t],t){case"ref":e!==i.current&&(i.current=e);continue e;case"value":case"checked":e[t]!==i&&document.activeElement!==e&&(e[t]=i);continue e}if(c[t]!==i)if("function"==typeof i){const r=t;c[r]=e[r]=i}else t in o||(e[t]=i)}else delete e[t];for(const t in o)t in r&&!1!==r[t]&&null!=r[t]?c[t]!==(i=r[t])&&"function"!=typeof i&&(o[t].value=i):(e.removeAttributeNode(o[t]),delete o[t]);for(const t in r)t in o||t in c||l(e,0,t,r[t],o);n.props=r},u=(t,s=n,c)=>{switch(typeof t){case"string":case"number":return[{create:h,replace:f,text:""+t,hook:c}];case"boolean":case"undefined":return[{create:h,replace:f,text:"",hook:c}]}if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++)e.push(...u(t[r],s,c));return e.keyed=null!=e[0]?.props?.key,e}const i=t.type;if("function"==typeof i){if(Object.getPrototypeOf(i)!==Function.prototype)throw new Error("CustomElement constructors are not implemented yet");const e=b.hook=c??{v:t,doc:s,children:[]},r=i({...t.props,children:t.children});return null!=t.props?.key&&(r.props={key:t.props.key,...r.props}),u(r,s,e)}switch(i){case e:t.children.length||t.children.push("");return u(t.children,s,c);case"svg":s=o;default:{t.props?.style&&"object"==typeof t.props.style&&(t.props.style=(e=>{let t="";for(const n in e)t+=r(n)+":"+e[n]+";";return t})(t.props.style));const e={};t.props?.is&&(e.is=t.props.is);return[{create:y,replace:g,options:e,doc:s,type:i,props:t.props,children:u(t.children,"foreignObject"===i&&n||s),hook:c}]}}},d=(e,t,r)=>(e.hook&&(e.hook.parent=t,e.hook.children.push(r)),r);function h(e){return d(this,e,document.createTextNode(this.text))}function f(e,t){if("#text"===t.nodeName)this.text!==t.nodeValue&&(t.nodeValue=this.text);else{const r=this.create(e);e.replaceChild(r,t)}}function y(e){const{doc:t,type:r,props:n,options:o,children:s}=this,c=t.createElement.call(document,r,o);if(n&&p(c,0,n),s.keyed)v(c,s);else for(let e=0;e<s.length;e++)k(c,s[e]);return d(this,e,c)}function g(e,t){if(t.nodeName.toUpperCase()===this.type.toUpperCase())a(t,this.type,this.props),m(t,this.children);else{const r=this.create(e);e.replaceChild(r,t)}}var k=(e,t)=>{const r=t.create(e);return e.append(r),r},v=(e,t)=>{const r=new Map;for(let n=0;n<t.length;n++){const o=t[n];r.set(o.props.key,{i:n,el:k(e,o)})}c.set(e,{touched:new Set,prev:t,keys:r})},m=(e,t)=>{if(c.has(e))return void((e,t,r)=>{const{prev:n,keys:o,touched:s}=t;s.clear();for(let t,c=0;c<r.length;c++){const i=r[c],l=i.props.key;let p;if(s.add(l),o.has(l)){const r=o.get(l);p=r.el,a(p,i.type,i.props),m(p,i.children),r.i>c&&(o.get(n[c].props.key).i=r.i,r.i=c),c?t.after(p):e.prepend(p)}else p=i.create(e),o.set(l,{i:c,el:p}),c?t.after(p):e.prepend(p);t=p}for(const t of o.keys())s.has(t)||(e.removeChild(o.get(t).el),o.delete(t));t.prev=r})(e,c.get(e),t);if(t.keyed)return void v(e,t);const r=e.childNodes,n=r.length;if(t.length>=n){for(let o=0;o<n;o++)t[o].replace(e,r[o]);for(let r=n;r<t.length;r++)k(e,t[r])}else{for(let r=t.length;r<n;r++)e.removeChild(e.lastChild);for(let n=0;n<t.length;n++)t[n].replace(e,r[n])}},b={hook:null},w=e=>{if(!e.parent)return;const t=u(e.v,e.doc,e);if(t.length>1){const r=document.createRange();r.setStartBefore(e.children[0]),r.setEndAfter(e.children.at(-1));const n=r.extractContents();m(n,t),r.insertNode(n)}else t[0].replace(e.parent,e.children[0])},A=(e,t)=>{m(t,u(e))},N=new WeakMap,C=()=>{const e=b.hook;if(N.has(e))return N.get(e);const t=()=>w(e);return N.set(e,t),t},x=e=>{const t=C();return function(...r){const n=e.apply(this,r);return t(),n}};export{e as Fragment,b as current,t as h,i as hooks,A as render,w as trigger,x as useCallback,C as useHook};